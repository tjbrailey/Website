---
title: "Calculating Electoral Proximity in R"
author: "Tom Brailey"
date: "2020-03-30"
categories: ["R"]
tags: ["R", "electoral proximity", "making votes count"]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE)

library(magrittr)
burkina_faso <- rio::import("C:/Users/tbrai/Dropbox/Constitutions Project/Data/Election Data/Cleaned Data/cp_af_full.csv") %>%
  dplyr::select(country_name, year, 
                       leg_elect_dum, leg_elect_year, 
                       pres_elect_year, pres_elect_year_fill) %>% 
  dplyr::filter(country_name == "Burkina Faso")
```

# What is Electoral Proximity?

Electoral proximity is the measure of fractionalization between a presidential and legislative election. That is, how temporally separated a state's legislative and presidential elections might be. If presidential and legislative elections occur on the same day, they are considered to be proximally maximal. If there is a considerable gap between elections, then there is considered to be less proximity between elections. Gary Cox termed this phrase in Making Votes Count (1997) and builds off of the work of Matthew Shugart, John Carey, Rein Taagepera, and others. Why is electoral proximity important? Cox suggests that it taps into executive-legislative behaviors; others note that greater proximity of presidential and legislative elections tend tends to reduce the number of effective parties in a state. In any case, being able to calculate a state's electoral proximity could open the door to some interesting studies. 

# How is Electoral Proximity Calculated? 

Per Cox (1997), electoral proximity can be estimated as follows: 

$$ PROXIMITY = 2 * \left| \frac{L_{t} - P_{t-1}}{P_{t+1} - P_{t-1}} - \frac{1}{2} \right|  $$

and while this is a lovely equation, it is difficult to implement on your own. 

# What's the Issue? 

I was assigned to work on a replication project that involved having to run a regression using electoral proximity as an independent variable. However, the dataset we were using had several more country-year observations (not showing-off, we were just measuring different things) and so we couldn't simply join the electoral proximity variable to our dataset. After spending a few hours trying to find a package that would make my life a whole bunch easier, I realized that I would have to hard-code a way of calculating electoral fractionalization. 

# Strategy

I wanted to test my coding skills on a country that exhibited three types of proximity: where $L_t$ = $P_t$, $L_t$ = $1-P_t$, and $L_t$ = $1+P_t$. That way I could determine whether my function $\textit{actually}$ worked on all potential electoral proximities. One country that exhibits such electoral variation is Burkina Faso. Let's check out the data. 

```{r}
head(burkina_faso)
```

So our unit of analysis is country-year. The variables we need for this function to work is a dummy for when a legislative election took place ($\textit{leg_elect_dum}$), the year of that election for each country-year observation ($\textit{leg_elect_year}$), a variable that takes the value of the year of a presidential election, and $NA$ otherwise ($\textit{pres_elect_year}$) and a ``filled'' version of the presidential election year ($\textit{pres_elect_year_fill}$). 

# The Function

```{r}

```